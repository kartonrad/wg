{"version":3,"sources":["src/loadbar.png","src/constants.js","src/hooks.js","src/components.js","src/wg.js","src/Date.web.js","src/util.js","src/finance.js","src/App.js","App.js"],"names":["module","exports","apiUrl","transparentWhite","urlFromUpload","upload","id","extension","Identity","React","createContext","WgAndUsers","wg","name","description","profile_pic","header_pic","users","useWebData","path","initial","error_obj","useState","data","setData","useContext","identity","useEffect","reqInit","headers","token","console","log","res","fetch","ok","error","text","json","err","hs","interpret_cost_object","me_id","cost","amt","Number","parseFloat","amount","repayment","nr_unpaid_shares","nr_shares","single_payment","my_gain","my_share_paid","my_share","paid","am_creditor","creditor_id","MoneyCard","props","login","user","date","Date","added_on","toDateString","substring","Pressable","style","s","card","marginLeft","padding","borderRadius","onPress","View","cardBody","paddingBottom","Text","fontSize","fontWeight","flexDirection","alignItems","RoundImage","imgSize","imgUrl","color","toFixed","Betrag","isWhite","textAlign","UserMoneyCard","stat","to_recieve","to_pay","Card","title","numberOfLines","marginTop","marginRight","negative","startsWith","isnull","backgroundColor","borderColor","borderWidth","minWidth","elevation","strikethrough","textDecorationLine","cardImgC","icon","cardImgIcons","cardTitle","cardDesc","children","UserCard","bio","username","width","height","cardImgClip","styleRing","Image","source","uri","flex","StyleSheet","create","paddingTop","shadowOpacity","justifyContent","overflow","position","right","top","aspectRatio","storeWrapper","alignSelf","storePanel","paddingVertical","contactCard","margin","newsWrapper","marginHorizontal","newsContainer","headerImg","marginBottom","zIndex","bottom","left","bannerImg","minHeight","Dimensions","get","action_heading","StoreScreen","route","params","wg_url","storeP","storeW","store","ImageBackground","blurRadius","onUserPress","map","newE","DateComp","now","setDate","mode","setMode","show","setShow","onChange","event","parts","target","value","split","prevDate","currentDate","length","setFullYear","parseInt","setHours","setMinutes","setSeconds","showMode","currentMode","timestring","toTimeString","timetstring","timetzstring","getFullYear","getMonth","getDate","getHours","getMinutes","container","buttonwrapper","datebutton","createElement","type","key","ev","toString","padStart","borderRightColor","borderRightWidth","alert","Platform","OS","options","extra","window","confirm","filter","Boolean","join","confirmOption","find","cancelOption","Alert","FinanceTab","createMaterialTopTabNavigator","FinanceStack","createStackNavigator","FinanceScreen","rerenderKey","setRerenderKey","rerender","Navigator","initialRouteName","Screen","rerenderHandle","component","CostDetailScreen","FinaceCostsScreen","FinanceRootScreen","stats","statt","user_id","navigation","setOptions","headerRight","sceneContainerStyle","screenOptions","tabBarIndicatorStyle","pprops","canAddEntry","StatsScreen","datasets","opacity","withShadow","Math","min","labels","statindex","is_ready","week","weeknum","i","thisstat","push","my_total_spending","total_unified_spending","i_paid","i_recieved","time_bucket","String","reverse","ScrollView","yAxisLabel","yAxisInterval","chartConfig","backgroundGradientFrom","backgroundGradientTo","propsForBackgroundLines","stroke","decimalPlaces","labelColor","propsForDots","r","strokeWidth","useShadowColorFromDataset","fillShadowGradientFromOpacity","fillShadowGradientToOpacity","bezier","marginVertical","JSON","stringify","undefined","FinanceBalanceScreen","balances","set_error","loading","setLoading","balanceOut","method","Button","disabled","bal","balance","BalanceObject","initiator_id","balanced_on","balanceId","url","costs","pressed","paddingStart","borderTopColor","borderStartColor","android_ripple","pickerResult","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","TypeError","responseType","open","send","chars","Base64","charCode","input","str","output","block","charAt","charCodeAt","Error","accept","req","setRequestHeader","resp","getResponseHeader","buffer","ctype","base64Flag","binary","slice","call","Uint8Array","forEach","b","fromCharCode","NewEntryScreen","set_loading","setName","setAmount","selUsers","setSelUsers","set_date","image","set_image","e","Object","values","amtf","keys","nr_othershares","includes","onSubmit","payload","toISOString","debtors","entries","body","filename","pop","match","exec","form","FormData","blob","imageToBlob","append","goBack","TextInput","textfield","placeholder","onChangeText","keyboardType","replace","trimStart","flexWrap","selected","sel","ee","ImagePicker","quality","exif","allowsEditing","cancelled","resizeMode","borderBottomColor","borderBottomWidth","hairlineWidth","shares","setBlob","getAuthImage","receit","then","Sharing","dialogTitle","mimeType","receitSource","share","ret","debtor_id","ts","loadingIndicatorSource","require","onError","nativeEvent","onLoad","Tab","createBottomTabNavigator","App","initialized","set_initialized","setLogin","d","jsonValue","AsyncStorage","setItem","load","getItem","wert","parse","Provider","oldLogin","saveData","NavigationContainer","Main","LoginFlow","LoginFlowStack","header","LoginFlowStart","LoginFlowChooseWGUser","LoginFlowAsUser","set_wg_url","psswd","set_psswd","password","userDict","tabBarShowLabel","HomeScreen","tabBarIcon","f","focused","size","headerShown","SettingScreen"],"mappings":"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","file":"static/js/app.7d9fa28b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loadbar.7041c03b.png\";","\r\n\r\nexport const apiUrl = \"https://wg-api.kartonrad.de\"\r\n//export const apiUrl = \"http://localhost:6969\"\r\n//export const transparentWhite = 'rgba(255,255,255,0.9)';\r\n\r\nexport const transparentWhite = 'rgba(255,255,255,0.8)';\r\n//export const accentColor = '#aa00ad';\r\n//export const mutedAccentColor = '#500051';\r\n\r\nexport const lightAccentColor = '#12912a';\r\nexport const accentColor = '#166b26';\r\nexport const mutedAccentColor = '#1d3522';\r\nexport const mutedlightAccentColor = '#204227';\r\n\r\n\r\n// uhhh\r\nimport React from 'react';\r\nexport function urlFromUpload(upload) {\r\n    if(upload===null) return null;\r\n    if(!upload||!upload.id||!upload.extension)\r\n        return apiUrl+\"/public/img/rejection.jpg\";\r\n    return apiUrl+\"/uploads/\"+upload.id+\".\"+upload.extension;\r\n}\r\n\r\nexport const Identity = React.createContext(false);\r\nexport const WgAndUsers = React.createContext({\r\n    wg: {\r\n        name: \"WG\",\r\n        description: \"Loading...\",\r\n        profile_pic: null,\r\n        header_pic: null\r\n    }, \r\n    users: {}\r\n});\r\n","import React from 'react';\r\nimport { apiUrl, Identity } from './constants.js';\r\n\r\nexport function useWebData(path, initial, error_obj) {\r\n    const [data, setData] = React.useState(initial);\r\n    const [identity] = React.useContext(Identity);\r\n\r\n    React.useEffect(() => {\r\n        async function hs() {\r\n            let reqInit = {};\r\n            if(identity) {\r\n                reqInit.headers = {\r\n                    \"Authorization\" : \"Bearer \"+identity.token\r\n                };\r\n            }\r\n\r\n            try {\r\n                console.log(\"Fetching \"+path);\r\n                var res = await fetch(apiUrl + path, reqInit);\r\n                if(!res.ok) {\r\n                    if (typeof error_obj !== \"undefined\")  {\r\n                        setData(error_obj);\r\n                    }\r\n                    console.error(\"Failed fetch [\"+path+\"]: TEXT=> \"+await res.text());\r\n                    return;\r\n                }\r\n\r\n                var json = await res.json();\r\n                if (typeof initial === typeof json) {\r\n                    setData(json);\r\n                    //console.log(json);\r\n                }\r\n            } catch (err) {\r\n                console.log(err);\r\n                if (typeof error_obj !== \"undefined\")  {\r\n                    setData(error_obj);\r\n                }\r\n            }\r\n        } if(path) hs();\r\n    }, [path])\r\n\r\n    return [data];\r\n}\r\n","import React, { useContext } from 'react';\r\nimport { Button, StyleSheet, Text, TextInput, View, Image, Pressable, Alert } from 'react-native';\r\nimport { FontAwesome5 as FontAwesome } from '@expo/vector-icons';\r\nimport { Identity, transparentWhite, urlFromUpload } from './constants.js';\r\nimport { Modal } from 'react-native-web';\r\n\r\nexport function interpret_cost_object(me_id, cost) {\r\n    let amt = Number.parseFloat(cost.amount);\r\n    let repayment_fract = (cost.nr_unpaid_shares / cost.nr_shares);\r\n    let repayment = repayment_fract * amt;\r\n    let single_payment = amt / cost.nr_shares;\r\n\r\n    let my_gain = 0;\r\n\r\n    let my_share_paid = cost.my_share.paid == true || cost.my_share.paid == null;\r\n    let am_creditor = me_id === cost.creditor_id;\r\n    if( am_creditor ) {\r\n      my_gain += repayment;\r\n    } else {\r\n      my_gain -= my_share_paid ? 0 : single_payment;\r\n    }\r\n\r\n    return {my_gain, single_payment, amt, cost, am_creditor}\r\n}\r\n\r\nexport function MoneyCard(props) {\r\n    let cost = props.cost;\r\n    let [login,setLogin] = useContext(Identity);\r\n    let {my_gain, single_payment, amt} = interpret_cost_object(login.user.id, cost);\r\n\r\n    let date = new Date(cost.added_on).toDateString().substring(4, 10);\r\n\r\n    let user = { name: \"Irgendwer\" };\r\n    if ( props.users && props.users[cost.creditor_id] ) {\r\n        user = props.users[cost.creditor_id];\r\n    }\r\n\r\n    /* \r\n        Zurückgezahlt wird insgesamt: {repayment.toFixed(2)}€{\"\\n\"}\r\n        Jeder Schuldner zahlt: {single_payment.toFixed(2)}€{\"\\n\"}\r\n        {cost.nr_shares} Beteiligte*/\r\n\r\n    return (\r\n        <Pressable style={{...s.card, marginLeft:10, padding: 8, borderRadius: 20, ...props.style}} onPress={props.onPress}>\r\n            \r\n            <View style={{...s.cardBody, paddingBottom: 0}}>\r\n                <Text style={{fontSize: 16, fontWeight: 'bold'}}>{cost.name}</Text>\r\n                <View style={{flexDirection: \"row\", alignItems: \"center\"}}>\r\n                    <RoundImage style={{marginLeft: -25}} imgSize={30} imgUrl={urlFromUpload(user.profile_pic)}/>\r\n                    <Text style={{color: \"#6d6d6d\"}}>   {user.name} zahlte: {amt.toFixed(2)}€</Text>\r\n                </View>\r\n            </View>\r\n            <View>\r\n                <Betrag amount={my_gain} isWhite/>\r\n                <Text style={{textAlign:'right', color: \"#6d6d6d\"}}>{date}</Text>\r\n            </View>\r\n        </Pressable>\r\n    );\r\n}\r\n\r\nexport function UserMoneyCard(props) {\r\n    var user = props.user ||{};\r\n    var stat = props.stat;\r\n\r\n    let to_recieve = Number.parseFloat(stat.to_recieve);\r\n    let to_pay = Number.parseFloat(stat.to_pay);\r\n\r\n    return (\r\n        <Card {...props} imgUrl={urlFromUpload(user.profile_pic)} imgSize={50}\r\n        title={<>\r\n            <Text numberOfLines={1}>{user.name}</Text>\r\n        </>}\r\n        text={<View style={{flexDirection:\"row\"}}><Betrag amount={to_recieve} isWhite/><Text> + </Text><Betrag amount={-to_pay} isWhite/></View>}\r\n        >\r\n            <View style={{marginTop: 0, marginRight: 10}}><Text>total:</Text><Betrag amount={to_recieve-to_pay} isWhite/></View>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport function Betrag(props) {\r\n    let amount = props.amount.toFixed(2);\r\n    let negative = amount.startsWith(\"-\")\r\n    let isnull = amount==\"0.00\"\r\n    if( !negative&&!isnull ) {\r\n        amount = \"+\"+amount;\r\n    }\r\n\r\n    return (<Text style={{\r\n        color:negative?\"#fc5b05\":\"#00e04e\", fontSize: 18,\r\n        fontWeight: \"bold\", textAlign: \"center\", backgroundColor: props.isWhite?\"#ffffff\":\"#f4f4f4\", borderColor: props.isWhite?\"#f4f4f4\":\"#eaeaea\", \r\n        borderWidth: 2, minWidth: 70,\r\n        borderRadius: 10, padding : 2, elevation: 1,\r\n        ...(props.strikethrough||isnull?{textDecorationLine: 'line-through', color: \"grey\"}:{})\r\n    }}>{amount}<Text style={{color:\"#c1c1c1\", fontWeight:\"normal\", fontSize: 10}}>€</Text></Text>)\r\n}\r\n\r\nexport function Card(props) {\r\n    var imgSize = props.imgSize || 65;\r\n    return (\r\n        <Pressable style={{...s.card, ...props.style}} onPress={props.onPress}>\r\n\r\n            <RoundImage style={s.cardImgC} imgSize={imgSize} imgUrl={props.imgUrl}>\r\n                {props.icon && <View style={s.cardImgIcons}>{props.icon}</View>}\r\n            </RoundImage>\r\n            \r\n            <View style={s.cardBody}>\r\n                <Text style={s.cardTitle}>{props.title}</Text>\r\n                <Text style={s.cardDesc}>{props.text}</Text>\r\n            </View>\r\n\r\n            {props.children}\r\n        </Pressable>\r\n    )\r\n}\r\n\r\nexport function UserCard(props) {\r\n    var user = props.user ||{};\r\n\r\n    return (\r\n        <Card {...props} text={user.bio} imgUrl={urlFromUpload(user.profile_pic)}\r\n        title={<>\r\n            <Text numberOfLines={1}>{user.name}</Text>\r\n            <Text style={{fontSize: 15, color: \"rgba(0, 0, 0, 0.7)\"}}>{\"\\n\"}@{user.username}</Text>\r\n        </>}></Card>\r\n    )\r\n}\r\n\r\nexport function ReviewCard(props) {\r\n    var user = props.user ||{};\r\n    const critColor = \"rgba(255, 0, 0, 0.78)\";\r\n    const posColor = \"rgba(0, 205, 14, 0.79)\";\r\n    const icon = <FontAwesome size={19} color={props.critical?critColor:posColor} name={props.critical?\"heart-broken\":\"heart\"} solid/>;\r\n\r\n    return (\r\n        <Card {...props} icon={icon} imgUrl={user.avatarUrl}\r\n        title={<>\r\n            {props.critical?\r\n                <Text style={{color:critColor, fontWeight: 'normal'}}>Nicht empfohlen</Text>:\r\n                <Text style={{color:posColor, fontWeight: 'normal'}} >Empfohlen</Text>}\r\n            <Text numberOfLines={1}>{\"\\n\"+props.title}</Text>\r\n            <Text style={{fontSize: 15, color: \"rgba(0, 0, 0, 0.7)\"}}>{\"\\n\"}{user.name} <Text style={{color: \"rgba(0, 0, 0, 0.48)\"}}>- {user.username}</Text> </Text>\r\n        </>}></Card>\r\n    )\r\n}\r\n\r\nexport function ReplyCard(props) {\r\n    var user = props.user ||{};\r\n    var icon;\r\n    var flag;\r\n    var representing = props.representing ||{};\r\n    if(props.official) {\r\n        flag = <Text style={{color:\"rgba(0, 114, 255, 1)\", fontWeight: 'normal'}}>Offizielle Antwort{\"\\n\"}</Text>;\r\n        icon = <FontAwesome size={19} color={\"rgba(0, 114, 255, 1)\"} name=\"star\" solid/>;\r\n    } else if (representing.name) {\r\n        flag = <Text style={{color:\"rgba(255, 157, 0, 1)\", fontWeight: 'normal'}}>Laden: {representing.name}{\"\\n\"}</Text>;\r\n        icon = <FontAwesome size={19} color={\"rgba(255, 157, 0, 1)\"} name=\"flag\" solid/>;\r\n    }\r\n\r\n    return (\r\n    <View style={{flexDirection: \"row\"}}>\r\n        <View style={{width: 40, justifyContent: 'center'}}>\r\n            <Text style={{fontSize:20, textAlignVertical:\"center\"}}> =&gt;</Text>\r\n        </View>\r\n        <Card {...props} style={{flex: 1}} imgUrl={user.avatarUrl}\r\n            title={<>\r\n                {flag}\r\n                <Text style={{fontSize: 15, color: \"rgba(0, 0, 0, 0.7)\"}}>{user.name} <Text style={{color: \"rgba(0, 0, 0, 0.48)\"}}>- {user.username}</Text> </Text></>}\r\n            imgSize={50}\r\n            icon={icon}\r\n        ></Card>\r\n    </View>);\r\n}\r\n\r\nexport function News(props) {\r\n    var user = props.user ||{};\r\n    return (\r\n    <View style={{borderTopWidth: 5, borderColor: \"black\", marginBottom: 20}}>\r\n        <Text style={{fontSize: 20, fontWeight: \"bold\"}}>{props.title}</Text>\r\n        <Text style={{fontSize: 15, color: \"rgba(0, 0, 0, 0.7)\", fontStyle: \"italic\"}}>by {user.name} <Text style={{color: \"rgba(0, 0, 0, 0.48)\"}}>- {user.username}</Text> </Text>\r\n        <Text style={{marginTop: 20, fontSize: 17}}>{props.text}</Text>\r\n    </View>\r\n    );\r\n}\r\n\r\nexport function RoundImage(props) {\r\n    var imgSize = props.imgSize || 65;\r\n\r\n    return (\r\n        <View style={{...props.style, width: imgSize, height: imgSize }}>\r\n            <View style={{...s.cardImgClip, ...props.styleRing}}>\r\n                <Image source={{uri: props.imgUrl }} // || \"https://www.100ita.com/blog/wp-content/uploads/2015/10/Bread-5.jpg\" \r\n                height={imgSize} style={{flex: 1}}/>\r\n            </View>\r\n            {props.children}\r\n        </View>\r\n    );\r\n}\r\n\r\nconst s = StyleSheet.create({\r\n    card: {\r\n        borderColor: \"transparent\",\r\n        borderRadius: 75/2,\r\n       // maxHeight: 200,\r\n        flexDirection: \"row\",\r\n        backgroundColor: transparentWhite,\r\n        marginTop: 5,\r\n        marginLeft: 20,\r\n    },\r\n    cardBody: {\r\n        flex: 1,\r\n        padding: 10,\r\n        paddingTop: 5\r\n        \r\n    },\r\n    cardTitle: {\r\n        fontSize: 18,\r\n        fontWeight: 'bold'\r\n    },\r\n    cardDesc: {\r\n        fontSize: 17,\r\n        color: \"#222\",\r\n        marginTop: 10\r\n    },\r\n    cardImgC: {     \r\n        width: 65,\r\n        height: 65,\r\n        marginLeft: -20,\r\n        \r\n        shadowOpacity: 1,\r\n        marginTop: 8\r\n    },\r\n    cardImgClip: {\r\n        width: \"100%\", height: \"100%\",\r\n        justifyContent:\"center\",\r\n        backgroundColor: \"rgba(41, 50, 135, 1)\",\r\n        borderRadius: 100/2,\r\n        overflow: \"hidden\",\r\n        elevation: 7,\r\n    },\r\n    cardImgIcons: {\r\n        position: 'absolute', \r\n        borderRadius: 100,\r\n        backgroundColor: \"white\",\r\n        padding: 3,\r\n        right: 0, \r\n        top: 0,\r\n        marginTop: -3,\r\n        marginRight: -7,\r\n        aspectRatio: 1,elevation: 10\r\n    }\r\n    \r\n})","import React from 'react';\r\nimport { Button, Dimensions, Image, ImageBackground, Platform, SegmentedControlIOSComponent, StyleSheet, Text, TextInput, View } from 'react-native';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport { useWebData } from './hooks';\r\nimport { transparentWhite, apiUrl, urlFromUpload, accentColor } from './constants';\r\nimport { RoundImage, UserCard } from './components';\r\n\r\nconst s = StyleSheet.create({\r\n    storeWrapper: {\r\n        alignSelf: 'flex-start',\r\n        flexDirection: \"column\",\r\n        alignSelf: \"stretch\"\r\n    },\r\n    storePanel: {\r\n        backgroundColor: transparentWhite,\r\n        padding: 10,\r\n        paddingVertical: 30\r\n    },\r\n    contactCard: {\r\n        width: 200,\r\n        backgroundColor: transparentWhite,\r\n        borderRadius: 75/2,\r\n        padding: 20,\r\n        margin:10,\r\n        overflow: \"hidden\"\r\n    },\r\n    newsWrapper: {\r\n        marginTop: 40,\r\n        marginHorizontal: 5\r\n    },\r\n    newsContainer: {\r\n        backgroundColor: transparentWhite,\r\n\r\n    },\r\n    headerImg: {\r\n        marginBottom: -30,\r\n        zIndex: 1,\r\n        position: 'absolute',\r\n        bottom:0,\r\n        left: 0\r\n    },\r\n    bannerImg: {\r\n        flex:1, \r\n        minHeight: 200, width: Dimensions.get(\"window\").width, zIndex:1, backgroundColor: \"rgba(41, 50, 135, 1)\"\r\n    },\r\n    action_heading: {  \r\n        color: \"white\", \r\n        borderRadius: 40, \r\n        backgroundColor: accentColor, \r\n        marginBottom:5, \r\n        textAlign: \"center\", \r\n        alignSelf: \"center\",\r\n        fontSize: 20,\r\n        padding: 5\r\n    }\r\n});\r\n\r\nconst testData = { \r\n    \"id\": 1, \r\n    \"url\": \"lamako\", \r\n    \"name\": \"LAMAKO Inc.\", \r\n    \"description\": \"Wir bei LAMKAO Inc sind vom Finanzamt persönlich mit der Überwachung von Peter Düsseldorf beauftragt worden.\", \r\n    \"profile_pic\": { \"id\": 1, \"extension\": \"jpeg\", \"original_filename\": \"signal-2022-10-24-125140_009.jpeg\", \"size_kb\": 186 }, \r\n    \"header_pic\": { \"id\": 2, \"extension\": \"jpeg\", \"original_filename\": \"signal-2022-10-24-125140_002.jpeg\", \"size_kb\": 270 } \r\n};\r\n\r\n\r\n\r\nexport function StoreScreen(props) {\r\n    /*props.navigation.addListener(\"focus\", () => {\r\n        props.navigation.dangerouslyGetParent().setOptions({ tabBarVisible: false })\r\n    })\r\n    props.navigation.addListener(\"blur\", () => {\r\n        props.navigation.dangerouslyGetParent().setOptions({ tabBarVisible: true })\r\n    });*/\r\n\r\n    // store object is handed over by navigation or fetched over network\r\n    var { wg_url, wg : storeP } = (props.route.params||{});\r\n    \r\n    const [storeW] = useWebData((wg_url&&!storeP)?\"/api/wg/\"+wg_url\r\n    :(!storeP)?\"/api/my_wg\":null, {\r\n        name: \"WG\",\r\n        description: \"Loading...\",\r\n        profile_pic: null,\r\n        header_pic: null\r\n    }, {\r\n        name: \"FEHLER!!\",\r\n        description: \"Konnte auf diese WG nicht zugreifen!\"\r\n    });\r\n    console.log(store);\r\n    const store = storeP || storeW;\r\n    //const store = testData;\r\n\r\n    const [users] = useWebData((store&&store.id)?\"/api/wg/\"+store.id+\"/users\"\r\n    :(!wg_url&&!storeP)?\"/api/my_wg/users\":null \r\n    , [], [{\r\n        name: \"FEHLER!\",\r\n        username: \"Halt\",\r\n    }]);\r\n\r\n    //\"https://www.europlan-online.de/files/6af6c04bf76e70f6a3139b8934ad2fb0.jpg\"\r\n    return (\r\n        <ImageBackground\r\n            blurRadius={5}\r\n            source={{ uri: urlFromUpload(store.header_pic)}}\r\n            style={{ flex: 1, justifyContent: \"center\", alignItems: \"center\", backgroundColor: \"rgba(37, 42, 82, 1)\" }}\r\n        >\r\n            <ScrollView style={s.storeWrapper}>\r\n                <ImageBackground source={{ uri: urlFromUpload(store.header_pic) }} style={s.bannerImg} > \r\n                    <RoundImage imgSize={100} style={s.headerImg} styleRing={{borderColor: transparentWhite, borderWidth: 5}} imgUrl={urlFromUpload(store.profile_pic)}></RoundImage>\r\n                </ImageBackground>\r\n                \r\n                <View style={s.storePanel}>\r\n                    <Text style={{fontWeight: \"bold\", fontSize: 23}}>{store.name}</Text>\r\n                    <Text style={{fontSize: 17}}>{store.description}</Text>\r\n                </View>\r\n\r\n\r\n                <View style={{...s.newsWrapper, ...props.style}}>\r\n                    { props.onUserPress?<Text style={s.action_heading}>Profil wählen:</Text>:false}\r\n\r\n                    {users.map((newE) => {\r\n                        return (\r\n                            <UserCard user={newE} key={newE.id} onPress={() => props.onUserPress?props.onUserPress(newE):\"\"}/>\r\n                        )\r\n                    })}\r\n                </View>\r\n            </ScrollView>\r\n        </ImageBackground>\r\n    );\r\n}","import { Button, ImageBackground, ScrollView, StyleSheet, Text, TextInput, View, Pressable } from 'react-native';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { lightAccentColor } from './constants';\r\n\r\nexport default function DateComp(props) { \r\n    const [date, setDate] = useState(new Date(Date.now()));\r\n    const [mode, setMode] = useState('date');\r\n    const [show, setShow] = useState(false);\r\n\r\n    const onChange = (event, mode) => {\r\n        let value = event.target.value;\r\n        let parts = value.split(/[^1234567890]/g);\r\n        console.log(parts);\r\n\r\n        if(mode==\"date\") {    \r\n            setDate((prevDate) => {\r\n                let currentDate = new Date(prevDate);\r\n                if(parts.length>=3)\r\n                    currentDate.setFullYear(Number.parseInt(parts[0]), Number.parseInt(parts[1]), Number.parseInt(parts[2]))\r\n\r\n                if (props.onChange) props.onChange(currentDate);\r\n                return currentDate;\r\n            });\r\n        } else {\r\n            setDate((prevDate) => {\r\n                let currentDate =new Date(prevDate);\r\n                if(parts[0]) currentDate.setHours(Number.parseInt(parts[0]))\r\n                if(parts[1]) currentDate.setMinutes(Number.parseInt(parts[1])) \r\n                if(parts[2]) currentDate.setSeconds(Number.parseInt(parts[2]))\r\n\r\n                if (props.onChange) props.onChange(currentDate);\r\n                return currentDate;\r\n            });\r\n        }\r\n    };\r\n\r\n    const showMode = (currentMode) => {\r\n        setShow(true);\r\n        setMode(currentMode);\r\n    };\r\n\r\n    const showDatepicker = () => {\r\n        showMode('date');\r\n    };\r\n\r\n    const showTimepicker = () => {\r\n        showMode('time');\r\n    };\r\n\r\n    let timestring = date.toTimeString().split(\" \");\r\n    let timetstring = timestring[0] || \"lm:ao:yi\";\r\n    let timetzstring = timestring[2] || \"(UTC bro ka)\"\r\n    timestring = timetstring.substring(0, 5) + \" \" +timetzstring;\r\n\r\n    console.log( \"render show: \"+show+\", mode: \"+mode+\", \"+`${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`+ \" \"+`${date.getHours()}:${date.getMinutes()}` )\r\n\r\n    return (\r\n        <View style={s.container}>\r\n            <Text>Datum/Uhrzeit:</Text>\r\n            <View style={s.buttonwrapper}>\r\n                <Pressable onPress={showDatepicker} style={s.datebutton}><Text>{date.toDateString()}</Text></Pressable>\r\n                <Pressable onPress={showTimepicker} style={s.datebutton}><Text>{timestring}</Text></Pressable>\r\n            </View>\r\n            {show && (\r\n                mode==\"date\"?(\r\n                    React.createElement(\"input\", {type: \"date\", key: \"date\", onChange: (ev)=>onChange(ev,mode), value: date.getFullYear().toString().padStart(4, \"0\")+\"-\"+date.getMonth().toString().padStart(2, \"0\")+\"-\"+date.getDate().toString().padStart(2, \"0\")} )\r\n                )\r\n                : (\r\n                    React.createElement(\"input\", {type: \"time\", key: \"time\", onChange: (ev)=>onChange(ev,mode), value: date.getHours().toString().padStart(2, \"0\")+\":\"+date.getMinutes().toString().padStart(2, \"0\")} )\r\n                )\r\n            )}\r\n        </View>\r\n    );\r\n}\r\n\r\nconst s = StyleSheet.create({\r\n    buttonwrapper: {\r\n        flexDirection: \"row\",  \r\n        borderColor: lightAccentColor, \r\n        borderWidth: 2,\r\n        borderRadius: 10, \r\n        backgroundColor: \"white\"\r\n    },\r\n\r\n    datebutton: {\r\n        flex: 1,\r\n        paddingVertical: 10,\r\n        borderRightColor: lightAccentColor,\r\n        borderRightWidth: 2,\r\n        alignItems: \"center\"\r\n    }\r\n})","import { Alert, Platform } from \"react-native\";\r\n\r\nconst alertPolyfill = (title, description, options, extra) => {\r\n    const result = window.confirm([title, description].filter(Boolean).join('\\n'))\r\n\r\n    if (result) {\r\n        const confirmOption = options.find(({ style }) => style !== 'cancel')\r\n        confirmOption && confirmOption.onPress()\r\n    } else {\r\n        const cancelOption = options.find(({ style }) => style === 'cancel')\r\n        cancelOption && cancelOption.onPress()\r\n    }\r\n}\r\n\r\nconst alert = Platform.OS === 'web' ? alertPolyfill : Alert.alert\r\n\r\n\r\n\r\nexport function confirmationDialog(confirm) {\r\n    alert('Bist du sicher?', 'Klick OK um weiterzumachen.', [\r\n        {\r\n          text: 'Abbrechen',\r\n          onPress: () => console.log(\"Cancelled operation\"),\r\n          style: 'cancel',\r\n        },\r\n        {text: 'OK',onPress: confirm},\r\n    ]);\r\n}\r\n\r\n","import { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport { Button, ImageBackground, ScrollView, StyleSheet, Text, TextInput, View, Pressable, Dimensions, ImageSourcePropType, Image, Platform } from 'react-native';\r\nimport { Betrag, Card, interpret_cost_object, MoneyCard, RoundImage, SimpleCard, UserCard, UserMoneyCard } from './components';\r\nimport { accentColor, apiUrl, Identity, lightAccentColor, mutedAccentColor, mutedlightAccentColor, transparentWhite, urlFromUpload, WgAndUsers } from './constants';\r\nimport { useWebData } from './hooks';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport DateComp from './Date';\r\nimport { LineChart } from 'react-native-chart-kit';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport * as Sharing from 'expo-sharing';\r\nimport { confirmationDialog } from './util';\r\n\r\n\r\nconst FinanceTab = createMaterialTopTabNavigator();\r\nconst FinanceStack = createStackNavigator();\r\n\r\nconst FinanceScreen = (props) => {\r\n  const {wg, users} = useContext(WgAndUsers);\r\n  const [rerenderKey, setRerenderKey] = useState(0);\r\n\r\n  function rerender() {\r\n    setRerenderKey((rerenderKey) => rerenderKey+1);\r\n  }\r\n\r\n  return (\r\n    <FinanceStack.Navigator initialRouteName=\"Finanzen\">\r\n      <FinanceStack.Screen name=\"Finanzen\">{(props) => {return <FinanceRootScreen key={rerenderKey} rerenderHandle={rerender} {...props}/>}}</FinanceStack.Screen>\r\n      <FinanceStack.Screen name=\"NewEntry\">\r\n        {(props) => {return <NewEntryScreen rerenderHandle={rerender} {...props}/>}}\r\n      </FinanceStack.Screen>\r\n      <FinanceStack.Screen name =\"ViewCost\" component={CostDetailScreen}/>\r\n      <FinanceStack.Screen name =\"HistoricBalanceCosts\" component={FinaceCostsScreen}/>\r\n    </FinanceStack.Navigator>\r\n  )\r\n}\r\n\r\nconst FinanceRootScreen = (props) => {\r\n  const {wg, users} = useContext(WgAndUsers);\r\n  const [login, setLogin] = useContext(Identity);\r\n  var [stats] = useWebData(\"/api/my_wg/costs/stats\", [], []);\r\n\r\n  useEffect ( () => {\r\n    let stat = stats.find((statt) => statt.user_id === login.user.id)\r\n    if ( stat  ) {\r\n      props.navigation.setOptions({\r\n        headerRight: (props) => <View style={{marginRight: 10}}><Betrag amount={stat.to_recieve-stat.to_pay}/></View>\r\n      })\r\n    }\r\n  }, [stats])\r\n\r\n  return (\r\n    <ImageBackground\r\n      blurRadius={5}\r\n      source={{ uri: urlFromUpload(wg.header_pic)}}\r\n      style={{ flex: 1, backgroundColor: \"rgba(37, 42, 82, 1)\" }}\r\n    >\r\n      <FinanceTab.Navigator initialRouteName=\"Einträge\" sceneContainerStyle={{backgroundColor: \"transparent\"}} screenOptions={{tabBarIndicatorStyle: {backgroundColor: accentColor}}}>\r\n        <FinanceTab.Screen name=\"Einträge\">{(pprops) => {\r\n          return( <FinaceCostsScreen {...pprops} rerenderHandle={props.rerenderHandle} canAddEntry/> );\r\n        }}</FinanceTab.Screen>\r\n        <FinanceTab.Screen name=\"Balance\">{(pprops) => {\r\n          return( <FinanceBalanceScreen {...pprops} rerenderHandle={props.rerenderHandle} users={users} stats={stats}/> );\r\n        }}</FinanceTab.Screen>\r\n        <FinanceTab.Screen name=\"Stats\" component={StatsScreen}/>\r\n      </FinanceTab.Navigator>\r\n    </ImageBackground>\r\n  )\r\n}\r\n\r\nconst StatsScreen = (props) => {\r\n  var [stats] = useWebData(\"/api/my_wg/costs/over_time/week\", [], []);\r\n\r\n  let fakedata=[0, 0];\r\n  let datasets = [\r\n    { key: \"i_recieved\", data: [], color: (opacity = 1) => `rgba(63, 252, 0, ${opacity})`, withShadow: false},\r\n    { key: \"i_paid\", data: [], color: (opacity = 1) => `rgba(252, 5, 5, ${Math.min(1,opacity+0.5)})`},\r\n    { key: \"wg_spending\", data: [], color: (opacity = 1) => `rgba(252, 132, 5,${Math.min(1,opacity+0.5)})`},\r\n    { key: \"my_spending\", data: [], color: (opacity = 1) => `rgba(89, 78, 252, ${Math.min(1,opacity+0.5)})`},\r\n  ]\r\n  let labels= [];\r\n\r\n  let statindex = 0;\r\n  let is_ready= false;\r\n  if( stats[0] && stats[0].week){\r\n    let weeknum = stats[0].week;\r\n    for (let i = 0; i<6; i++) {\r\n      let thisstat = stats[statindex];\r\n      if ( thisstat && thisstat.week === weeknum - i ) \r\n      {\r\n        datasets[3].data.push(thisstat.my_total_spending)\r\n        datasets[2].data.push(thisstat.total_unified_spending)\r\n        datasets[1].data.push(thisstat.i_paid)\r\n        datasets[0].data.push(thisstat.i_recieved)\r\n        labels.push(new Date(thisstat.time_bucket).toDateString().substring(4, 10));\r\n        statindex++;\r\n      } else {\r\n        datasets[0].data.push(0);\r\n        datasets[1].data.push(0);\r\n        datasets[2].data.push(0);\r\n        datasets[3].data.push(0);\r\n        labels.push(\"KW\"+String(weeknum-i))\r\n      }\r\n    }\r\n\r\n    labels.reverse();\r\n    datasets[0].data.reverse();\r\n    datasets[1].data.reverse();\r\n    datasets[2].data.reverse();\r\n    datasets[3].data.reverse();\r\n    is_ready = true;\r\n  }\r\n\r\n  return <ScrollView>\r\n<LineChart\r\n    data={{\r\n      labels: is_ready ? labels : [\"loading\"],\r\n      datasets: is_ready ? datasets : [{data:[0]}]\r\n      \r\n    }}\r\n    width={Dimensions.get(\"window\").width} // from react-native\r\n    height={400}\r\n    yAxisLabel=\"$\"\r\n    yAxisInterval={1} // optional, defaults to 1\r\n    chartConfig={{\r\n      backgroundColor: \"#ffffff\",\r\n      backgroundGradientFrom: \"#ffffff\", \r\n      backgroundGradientTo: \"#ffffff\",\r\n      propsForBackgroundLines: {\r\n        stroke: \"#ccc\"\r\n      },\r\n      //backgroundGradientFrom: \"#3d3d3d\",\r\n      //backgroundGradientTo: \"#654977\",\r\n      decimalPlaces: 2, // optional, defaults to 2dp\r\n      color: (opacity = 1) => `rgba(255, 255, 255, ${opacity})`,\r\n      labelColor: (opacity = 1) => `rgba(0, 0, 0, ${opacity})`,\r\n      style: {\r\n        borderRadius: 16\r\n      },\r\n      propsForDots: {\r\n        r: \"6\",\r\n        strokeWidth: \"2\",\r\n        stroke: \"#42006b\"\r\n      },\r\n      useShadowColorFromDataset: true,\r\n      fillShadowGradientFromOpacity: 0.4,\r\n      fillShadowGradientToOpacity: 0\r\n    }}\r\n    bezier\r\n    style={{\r\n      marginVertical: 8,\r\n      borderRadius: 16\r\n    }}\r\n  />\r\n  <Text style={{backgroundColor: transparentWhite}}>Ausgaben der letzten 6 Wochen:{\"\\n\"}Enthält bereits ausgeglichene Einkäufe{\"\\n\"}\r\n    <Text style={{color: \"rgb(252, 132, 5)\"}}>Orange</Text> für die Gesamte Wg{\"\\n\"}\r\n    <Text style={{color: \"rgb(89, 78, 252)\"}}>Blau</Text> für deine Ausgaben (Summe aller Anteile){\"\\n\"}\r\n    <Text style={{color: \"#4F7B30\"}}>Grün</Text> für was du zurückbekommst/kamst {\"\\n  \"}(Für Einkäufe der Woche){\"\\n\"}\r\n    <Text style={{color: \"rgb(252, 5, 5)\"}}>Rot</Text> für was du den WGlern zahlst/zahltest{\"\\n  \"}(Für Einkäufe der Woche){\"\\n\"}\r\n  </Text>\r\n  <Text style={{backgroundColor: transparentWhite}}>{JSON.stringify(stats, undefined, 2)}</Text>\r\n  </ScrollView>\r\n}\r\n\r\nconst FinanceBalanceScreen = (props) => {\r\n  var [balances] = useWebData(\"/api/my_wg/costs/balance\", [], []);\r\n  var [error, set_error] = useState(false);\r\n  var [loading, setLoading] = useState(false);\r\n  const [login, setLogin] = useContext(Identity);\r\n\r\n  async function balanceOut() {\r\n    setLoading(true);\r\n    try {\r\n      var res = await fetch(apiUrl + \"/api/my_wg/costs/balance\", { \r\n        method: \"POST\", \r\n        headers: { 'Content-Type': \"application/json\",\r\n          \"Authorization\" : \"Bearer \"+login.token\r\n      } });\r\n      if ( res.ok ) {\r\n        console.log( \"New Balance Successful\");\r\n        if (props.rerenderHandle) props.rerenderHandle();\r\n      } else {\r\n        let text = await res.text();\r\n        set_error(text);\r\n      }\r\n    } catch (err) {\r\n      console.log(err);\r\n      set_error(err);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  //console.log(\"PROPS STATS\", props)\r\n  return (<ScrollView style={{flex:1}}>\r\n    <Text style={{fontSize:23, alignSelf:\"stretch\", padding: 10, backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>Derzeitiger Unterschied</Text>\r\n    {props.stats.map( (stat) => {\r\n      let user = props.users[stat.user_id];\r\n      //console.log(\"STAT\", stat)\r\n      return (<UserMoneyCard user={user} stat={stat} key={user.id}></UserMoneyCard>)\r\n    })}\r\n    <Button color={accentColor} disabled={loading} onPress={() => confirmationDialog(balanceOut)} title=\"Abrechnen/Null setzen\"></Button>\r\n    {error && <Text>{JSON.stringify(error, undefined, 2)}</Text>}\r\n    <Text style={{fontSize:23, marginTop:20, alignSelf:\"stretch\", padding: 10, backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>Historische Abrechnungen</Text>\r\n    {balances.map((bal) => {\r\n      return <BalanceObject balance={bal} key={bal.id} navigation={props.navigation}/>\r\n    })}\r\n  </ScrollView>)\r\n}\r\n\r\nconst BalanceObject = (props) => {\r\n  let balance = props.balance;\r\n  const {wg, users} = useContext(WgAndUsers);\r\n  let user = users[String(balance.initiator_id)]||{};\r\n  let date = new Date(balance.balanced_on);\r\n\r\n  let i_paid = Number.parseFloat(balance.i_paid);\r\n  let i_recieved = Number.parseFloat(balance.i_recieved);\r\n  let my_total_spending = Number.parseFloat(balance.my_total_spending);\r\n  let total_unified_spending = Number.parseFloat(balance.total_unified_spending);\r\n\r\n  return (\r\n    <Card imgUrl={urlFromUpload(user.profile_pic)} imgSize={40}\r\n    title={<>\r\n        <Text numberOfLines={1}>{date.toDateString()}</Text>\r\n      </>}\r\n    text={<View> \r\n        <Text>Angeordnet von {user.name}</Text>\r\n        <View style={{flexDirection:\"row\", alignItems:\"center\"}}><Text>Ich gab </Text><Betrag amount={-my_total_spending} isWhite/><Text> aus.</Text></View>\r\n        <View style={{flexDirection:\"row\", alignItems:\"center\"}}><Text>Die WG gab </Text><Betrag amount={-total_unified_spending} isWhite/><Text> aus.</Text></View>\r\n      </View>}\r\n    onPress={() => {\r\n      if(props.navigation) props.navigation.push(\"HistoricBalanceCosts\", {balanceId: balance.id})\r\n    }}\r\n    >\r\n        <View style={{marginTop: 0, marginRight: 10}}><Text>total:</Text><Betrag amount={i_recieved-i_paid} isWhite/></View>\r\n    </Card>\r\n)\r\n}\r\n\r\nconst FinaceCostsScreen = (props) => {\r\n  let url = \"/api/my_wg/costs\";\r\n  if(props.route && props.route.params && props.route.params.balanceId) { url += \"?balance=\"+props.route.params.balanceId}\r\n\r\n  var [costs] = useWebData(url, [], []);\r\n  const {wg, users} = useContext(WgAndUsers);\r\n\r\n  return(\r\n  <><ScrollView style={{flex:1}}>\r\n      {costs.map((cost ) => {\r\n        return (<MoneyCard key={cost.id} cost={cost} users={users} onPress={() => {\r\n          props.navigation.push(\"ViewCost\", {cost, users})\r\n        }}/>);\r\n      })}\r\n  </ScrollView>\r\n  {props.canAddEntry && <View style={{backgroundColor: transparentWhite}}>\r\n    <Pressable \r\n      style={({ pressed }) => ({\r\n        backgroundColor: pressed?mutedlightAccentColor:accentColor, \r\n        paddingTop: pressed?10:5,\r\n        paddingBottom: pressed?0:5,\r\n        paddingStart: pressed?10:0,\r\n        margin: 5, marginHorizontal: 15, \r\n        borderRadius: 10,\r\n        borderWidth: 8,\r\n        borderColor: pressed?mutedlightAccentColor:accentColor,\r\n        borderTopColor: pressed?mutedAccentColor:lightAccentColor,\r\n        borderStartColor: pressed?mutedAccentColor:lightAccentColor,\r\n      })} \r\n      android_ripple={{color: \"transparent\"}}\r\n      onPress={() => {\r\n        props.navigation.push(\"NewEntry\")\r\n      }}\r\n    >\r\n      <Text style={{color: \"white\", textAlign: \"center\"}}>Neuer Eintrag</Text></Pressable>\r\n  </View>}\r\n  </>);\r\n}\r\n\r\nasync function imageToBlob(pickerResult) {\r\n  const blob = await new Promise((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.onload = function () {\r\n      resolve(xhr.response);\r\n    };\r\n    xhr.onerror = function () {\r\n      reject(new TypeError(\"Network request failed\"));\r\n    };\r\n    xhr.responseType = \"blob\";\r\n    xhr.open(\"GET\", pickerResult.uri, true);\r\n    xhr.send(null);\r\n  });\r\n  return blob\r\n}\r\n\r\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\nconst Base64 = {\r\n  btoa: (input = '')  => {\r\n    let str = input;\r\n    let output = '';\r\n\r\n    for (let block = 0, charCode, i = 0, map = chars;\r\n    str.charAt(i | 0) || (map = '=', i % 1);\r\n    output += map.charAt(63 & block >> 8 - i % 1 * 8)) {\r\n\r\n      charCode = str.charCodeAt(i += 3/4);\r\n\r\n      if (charCode > 0xFF) {\r\n        throw new Error(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");\r\n      }\r\n      \r\n      block = block << 8 | charCode;\r\n    }\r\n    \r\n    return output;\r\n  },\r\n\r\n  atob: (input= '') => {\r\n    let str = input.replace(/=+$/, '');\r\n    let output = '';\r\n\r\n    if (str.length % 4 == 1) {\r\n      throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");\r\n    }\r\n    for (let bc = 0, bs = 0, buffer, i = 0;\r\n      buffer = str.charAt(i++);\r\n\r\n      ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\r\n        bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\r\n    ) {\r\n      buffer = chars.indexOf(buffer);\r\n    }\r\n\r\n    return output;\r\n  }\r\n};\r\n\r\nasync function getAuthImage(uri, token) {\r\n  let [buffer, ctype] = await new Promise((accept, reject) => {\r\n    var req = new XMLHttpRequest();\r\n    req.open(\"GET\", uri, true);\r\n    req.setRequestHeader(\"Authorization\", \"Bearer \"+token);\r\n    req.responseType = \"arraybuffer\";\r\n\r\n    req.onload = function(event) {\r\n        var resp = req.response;\r\n        if(resp) {\r\n            accept([resp,req.getResponseHeader('Content-Type')]);\r\n        }\r\n    };\r\n\r\n    req.send(null);\r\n  });\r\n\r\n  var base64Flag = 'data:'+ctype+';base64,';\r\n\r\n  var binary = '';\r\n  var bytes = [].slice.call(new Uint8Array(buffer));\r\n\r\n  bytes.forEach((b) => binary += String.fromCharCode(b));\r\n\r\n  var imageStr = Base64.btoa(binary);\r\n\r\n  return [base64Flag + imageStr, ctype];\r\n}\r\n\r\nconst NewEntryScreen = (props) => {\r\n  const {wg, users} = useContext(WgAndUsers);\r\n  const [login, setLogin] = useContext(Identity);\r\n\r\n  const [error, set_error] = useState(\"\");\r\n  const [loading, set_loading] = useState(0);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [amount, setAmount] = useState(\"0.00\");\r\n  const [selUsers, setSelUsers] = useState({});\r\n  const [date, set_date] = useState(new Date());\r\n  const [image, set_image] = useState(false);\r\n\r\n  useEffect(()=> {\r\n    let e = {};\r\n    for (let user of Object.values(users) ) {\r\n      e[user.id] = login.user.id === user.id;\r\n    }\r\n    setSelUsers(e);\r\n  }, []);\r\n  console.log(selUsers);\r\n\r\n  // sanitize amount\r\n  const onAmountChange = (amt) => {\r\n    if( typeof amt !== \"string\" ) return;\r\n\r\n    if( amt.match(/^[0123456789]*.*[0123456789]*$/) ) {\r\n      amt = amt.replace(/[^0123456789]/g, \"\")\r\n        .padStart(3, \"0\");\r\n      //console.log(\"STEP 1 => \"+amt)\r\n      \r\n      amt = amt.slice(0, amt.length-2) + \".\" + amt.slice(amt.length-2);\r\n      //console.log(\"STEP 2 => \"+amt)\r\n\r\n      amt = amt.replace(\"0\", \" \").trimStart().replace(\" \",\"0\").padStart(4,\"0\");\r\n      //console.log(\"STEP 3 => \"+amt)\r\n\r\n      setAmount(amt)\r\n    } else {\r\n      console.log(\"Ignored fool\")\r\n      setAmount(\"0.00\")\r\n    }\r\n  };\r\n  let amtf = Number.parseFloat(amount);\r\n  let nr_shares = Object.keys(selUsers).length;\r\n  let nr_othershares = nr_shares - (Object.keys(selUsers).includes(String(login.user.id)) ?1:0); \r\n\r\n  const onSubmit = async () => {\r\n    set_loading(1);\r\n    try {\r\n      let payload = JSON.stringify( { name, amount: Number.parseFloat(amount), added_on: date.toISOString(), \r\n        debtors: Object.entries(selUsers).map(e=>[Number.parseInt(e[0]), e[1]]) } );\r\n      console.log(payload);\r\n\r\n      var res = await fetch(apiUrl + \"/api/my_wg/costs\", { \r\n        method: \"POST\", \r\n        body: payload, \r\n        headers: { 'Content-Type': \"application/json\",\r\n          \"Authorization\" : \"Bearer \"+login.token\r\n      } });\r\n      if ( res.ok ) {\r\n        let json = await res.json();\r\n        console.log( \"New Entry successfull\", json );\r\n\r\n        if( image ){\r\n          try{\r\n            set_loading(2);\r\n            let filename = image.uri.split(\"?\")[0].split(\"/\").pop()||\"lmao.jpg\";\r\n            // Infer the type of the image\r\n            let match = /\\.(\\w+)$/.exec(filename);\r\n            let type = match ? `image/${match[1]}` : `image`;\r\n\r\n            const form = new FormData();\r\n            if (Platform.OS === \"web\"){\r\n              let blob =await imageToBlob(image);\r\n              if ( filename.split(\".\").length < 2)\r\n                filename += \".\" + blob.type.split(\"/\").pop();\r\n              form.append('receit',blob, filename);\r\n            }else\r\n              form.append('receit', {\r\n                name: filename, type, uri: image.uri\r\n              }, filename);\r\n            \r\n            var res = await fetch(apiUrl + \"/api/my_wg/costs/\"+json+\"/receit\", { \r\n              method: \"PUT\", \r\n              body: form, \r\n              headers: {\r\n                \"Authorization\" : \"Bearer \"+login.token,\r\n              }\r\n            });\r\n            if(!res.ok) {\r\n              set_loading(0);\r\n              let err = await res.text();\r\n              console.log(err)\r\n              set_error(err);\r\n              return \r\n            }\r\n          } catch(err) {\r\n            set_loading(0);\r\n            console.log(err);\r\n            set_error(err);\r\n            return;\r\n          }\r\n        }\r\n\r\n        props.rerenderHandle();\r\n        props.navigation.goBack();\r\n        set_loading(0)\r\n      } else {\r\n        let text = await res.text();\r\n        set_error(text);\r\n        set_loading(0)\r\n      }\r\n    } catch (err) {\r\n      set_error(err);\r\n      set_loading(0);\r\n    }\r\n  }\r\n\r\n  return (\r\n    loading==2?<View style={{flex: 1, alignItems: \"center\", justifyContent: \"center\"}}>\r\n      <Text>Eintrag eingerichtet: {\"\\n\"} Versuche nun Ahhang hochzuladen... {\"\\n\"} Einen Augenblick.. Fenster nicht schließen...\r\n      {error&&\"\\nFEHLER: Naja verkackt- kann man nichts dran ändern, \\n eintrag ist schon abgeschickt (schlechtes desin ik):\\nSag mir mal bescheid wa:\\n\"+JSON.stringify(error)}\r\n      </Text>\r\n    </View>:\r\n    (<ScrollView style={{margin: 10}} >\r\n        <View style={{flexDirection: \"row\", alignItems: \"center\"}} >\r\n          <TextInput style={{flex: 1, ...s.textfield}} placeholder='Beschreibung'  onChangeText={setName} value={name}></TextInput>\r\n          <TextInput style={{minWidth: 50, marginLeft: 5, ...s.textfield}} placeholder='0.00' keyboardType='numeric' onChangeText={onAmountChange} value={amount}></TextInput>\r\n          <Text>€</Text>\r\n        </View>\r\n        <DateComp onChange={set_date}/>\r\n        <Text>Beteiligte:</Text>\r\n        <View style={{flexDirection: \"row\", margin: 5, marginBottom: 20, flexWrap: 'wrap'}}>\r\n          {Object.values(users).map((user) => {\r\n            let selected = Object.keys(selUsers).includes(String(user.id));\r\n\r\n            return (<Pressable key={user.id} style={{ flexDirection: \"row\", margin: 5, height: 60, minWidth: 108, alignItems: \"center\", justifyContent: \"space-evenly\" ,\r\n            backgroundColor: selected?accentColor:\"white\" }}\r\n              onPress={() => {\r\n                setSelUsers((sel) => {\r\n                  let ee = {...sel, [user.id]: user.id==login.user.id};\r\n                  if (Object.keys(sel).includes(String(user.id))) delete ee[user.id];\r\n                  return ee;\r\n                })\r\n              }}\r\n            >\r\n              <RoundImage imgUrl={urlFromUpload(user.profile_pic)} imgSize={50} styleRing={{borderWidth: 3, borderColor: \"white\"}}></RoundImage> \r\n              <Text style={{color:selected?\"white\":\"black\"}}>{user.name}</Text>\r\n            </Pressable>);\r\n          })}\r\n        </View>\r\n\r\n        <Text>Anhang:</Text>\r\n        {image==false? (\r\n          <View style={{justifyContent:\"space-evenly\", flexDirection:\"row\"}}>\r\n            <Button title=\"Kamera\" color={accentColor} onPress={async () => {\r\n              let res = await ImagePicker.launchCameraAsync({quality: 1, exif: false, allowsEditing: true });\r\n              if(!res.cancelled) set_image(res);\r\n            }}/>\r\n            <Button title=\"Bibliothek\" color={accentColor} onPress={async () => {\r\n              let res = await ImagePicker.launchImageLibraryAsync({quality: 1, exif: false, allowsEditing: true });\r\n              if(!res.cancelled) set_image(res);\r\n            }}/></View>\r\n        ) : (<View><Button title=\"Entfernen\" color=\"red\" onPress={()=>set_image(false)}/><Image style={{flex:1, backgroundColor: \"grey\", minHeight: 400}} resizeMode=\"center\" source={{uri: image.uri}}/></View>)}\r\n\r\n        <View style={{borderBottomColor: 'black',borderBottomWidth: StyleSheet.hairlineWidth,}}/>\r\n        <Text>Du hast {amount}€ bezahlt.</Text>\r\n        <Text>Du bekommst <Betrag amount={amtf/nr_shares*(nr_othershares)}></Betrag> von den {nr_othershares} anderen Beteiligten zurück</Text>\r\n        <View style={{borderBottomColor: 'black',borderBottomWidth: StyleSheet.hairlineWidth, marginBottom:20}}/>\r\n        <Button title=\"Senden\" color={accentColor} disabled={loading!=0||!name||(!amtf>0)||nr_shares<1} onPress={onSubmit}></Button>\r\n        <Text>{JSON.stringify(error)}</Text>\r\n    </ScrollView>)\r\n  );\r\n}\r\n\r\nconst CostDetailScreen = (props) => {\r\n  let cost = props.route.params.cost;\r\n  const [login, setLogin] = useContext(Identity);\r\n  let {my_gain, single_payment, amt, am_creditor} = interpret_cost_object(login.user.id, cost);\r\n\r\n  let users = props.route.params.users;\r\n  let [shares] = useWebData(\"/api/my_wg/costs/\"+cost.id+\"/shares\", [], false);\r\n  let date = new Date(cost.added_on).toString();\r\n\r\n  \r\n\r\n  let [[blob, ctype], setBlob] = useState([null,null]);\r\n  useEffect( () => {\r\n    let blobPromise = getAuthImage(urlFromUpload(cost.receit), login.token);\r\n    blobPromise.then((e) => {\r\n        console.log(\"Blob ready!\")\r\n        //console.log(e);\r\n        setBlob(e)\r\n    }, (err) => {\r\n      console.error(\"Couldn't get image blob:\", err);\r\n      setBlob([{error: true}, null])\r\n    });\r\n  }, [cost.receit, login])\r\n\r\n  const onPressImg = async () => {\r\n    if( blob && blob.error!==false ) {\r\n      if(await Sharing.isAvailableAsync()) {\r\n        try {\r\n\r\n          await Sharing.shareAsync(blob, {dialogTitle: \"Share Receit\", mimeType: ctype })\r\n        } catch (err) {\r\n          console.error(\"Couldn't share: \",err)\r\n        }\r\n      } else {\r\n        console.error(\"Sharing Unavailable\")\r\n      }\r\n    } else {\r\n      console.error(\"Blob nicht am start!\")\r\n    }\r\n  };\r\n\r\n  const deleteEntry = () => {\r\n    console.log(\"Delete thing\");\r\n    const res = fetch(apiUrl + \"/api/my_wg/\" + cost.id, { \r\n      method: \"DELETE\", \r\n      headers: {\r\n        \"Authorization\" : \"Bearer \"+login.token,\r\n      }\r\n    });\r\n    res.then(() => {\r\n\r\n    }).catch(() => {\r\n      \r\n    });\r\n  };\r\n\r\n  //console.log(urlFromUpload(cost.reciet));\r\n\r\n  let receitSource = {headers: { \"Authorization\": \"Bearer \"+login.token, \"Accept\": \"*/*\", \"Accept-Encoding\": \"gzip, deflate, br\" }, method: \"GET\", uri: urlFromUpload(cost.receit)};\r\n  console.log(receitSource);\r\n\r\n  return <ScrollView><MoneyCard key={cost.id} cost={cost} users={users}/><View style={{margin: 10}}>\r\n    \r\n    <Text>Datum: {date}</Text>\r\n    <Text style={{fontSize:20, marginTop:20, alignSelf:\"stretch\", backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>Anteile:</Text>\r\n    {shares.map((share) => {\r\n      let user = users[String(share.debtor_id)] || {name: \"????Ubkenannter Nuter?????\"};\r\n\r\n      let ret;\r\n      let ts=share.paid?{textDecorationLine:\"line-through\", color: \"grey\"}:{};\r\n      \r\n      if( cost.my_share.debtor_id === share.debtor_id ) {\r\n        ret=<><Text style={ts}>{user.name} übernimmt </Text><Betrag amount={-single_payment} strikethrough={share.paid}/></>\r\n      }else if( am_creditor) {\r\n        ret=<><Text style={ts}>{user.name} übernimmt </Text><Betrag amount={single_payment} strikethrough={share.paid}/></>\r\n      } else {\r\n        ret=<><Text style={ts}>{user.name} übernimmt </Text><Betrag amount={single_payment} strikethrough={true}/></>\r\n      }\r\n\r\n      return <View key={share.debtor_id} style={{flexDirection:\"row\", alignItems:\"center\"}}>{ret}{share.paid&&<Text> ✔gezahlt</Text>}</View>\r\n    })}\r\n    <View style={{flexDirection:\"row\", alignItems:\"center\"}}><Text>Du bekommst/zahlst noch: </Text><Betrag amount={my_gain}/></View>\r\n    {cost.receit && cost.receit.id && <>\r\n      <Text style={{fontSize:20, marginTop:20, alignSelf:\"stretch\", backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>Beleg:</Text>\r\n      <Pressable /*onPress={onPressImg}*/>\r\n        <Image style={{flex:1, backgroundColor: blob&&blob.error===true?\"red\":\"lightgray\", minHeight: 600}} \r\n        resizeMode=\"center\" \r\n        loadingIndicatorSource={require(\"./loadbar.png\")}\r\n        source={blob==null?require(\"./loadbar.png\"):blob.error===true?{uri: urlFromUpload({})}:{uri: blob}}\r\n        onError={(error) => console.error(\"Failed loading image: \", error.nativeEvent, error.nativeEvent.error)}\r\n        onLoad={()=>console.log(\"Image pulled successfully.\")}\r\n        />\r\n      </Pressable>\r\n      \r\n    </>}\r\n    {/*<Button color=\"red\" onPress={() => confirmationDialog(deleteEntry)} title=\"Löschen.\"></Button>*/}\r\n  </View></ScrollView>\r\n}\r\n\r\nconst s = StyleSheet.create({\r\n  textfield: { \r\n    borderColor: lightAccentColor, \r\n    borderWidth: 2,\r\n    borderRadius: 10, \r\n    padding: 4,\r\n    backgroundColor: \"white\"\r\n  }\r\n})\r\n\r\n\r\nexport { FinanceScreen }","import { StatusBar } from 'expo-status-bar';\nimport { Button, ImageBackground, ScrollView, StyleSheet, Text, TextInput, View, Pressable, Image } from 'react-native';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { NavigationContainer, useNavigation } from '@react-navigation/native';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { createStackNavigator } from '@react-navigation/stack';\n\n\nimport { StoreScreen } from './wg';\nimport { Betrag, MoneyCard, RoundImage, SimpleCard, UserMoneyCard } from './components';\nimport { accentColor, apiUrl, Identity, lightAccentColor, mutedAccentColor, mutedlightAccentColor, transparentWhite, urlFromUpload, WgAndUsers } from './constants';\nimport { useWebData } from './hooks';\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { FinanceScreen } from './finance';\n\nimport * as ImagePicker from 'expo-image-picker';\n\nconst Tab = createBottomTabNavigator();\n/*\nexport function App() {\n  return <View>\n  <Image style={{flex:1, backgroundColor: \"gray\", minHeight: 600}} \n  resizeMode=\"center\" \n  source={\n    {headers: { \n      \"Authorization\": \"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdXRoX2FzIjoyLCJhdWQiOiJVU0VSIiwiZXhwIjoxNjk5MTY3NzEyLCJpYXQiOjE2Njc2MTAxMTIsImlzcyI6IndnLWFwaSB2MC4xLjAgYnkgS2FydG9ucmFkIDxoaUBrYXJ0b25yYWQuZGU-In0.7CkNG7wywPfk_Lk6FCYRYBmae4j44jmp1UypPwDs-Rw\",\n    }, \n    uri: apiUrl+\"/uploads/11.jpeg\"}}\n  /></View>\n}*/\n\nexport function App() {\n  const [initialized, set_initialized] = useState(false);\n  const [login, setLogin] = useState(false);\n\n  console.log(\"APP LVL RD: \", initialized, login);\n\n  function ssetLogin(e) {\n    //console.log(e);\n    setLogin((oldLogin) => {\n      let wert = e;\n      if(typeof e==\"function\") {\n        console.log(\"Lmao function?\")\n        wert = e(oldLogin);\n      }\n      saveData(wert);\n      return wert;\n    });\n  }\n\n  async function saveData(d) {\n    try {\n      const jsonValue = JSON.stringify(d)\n      await AsyncStorage.setItem('@login_data', jsonValue);\n      console.log(\"Login Value saved!\")\n    } catch (e) {\n      console.error(\"Error saving value in AsyncStorage: \", e)\n    }\n  }\n\n  const load = async () => {\n    try {\n      const jsonValue = await AsyncStorage.getItem('@login_data')\n      let wert =  jsonValue != null ? JSON.parse(jsonValue) : null;\n      if( typeof wert == \"object\" && wert !== null) {\n        console.log(\"Successfully fetched login val!\");\n        setLogin(wert);\n      } else {\n        console.log(\"Successfully fetched the realization that user is logged out!\");\n        set_initialized(true); \n      }\n\n    } catch(e) {\n      // error reading value\n      console.error(\"Error getting login val: \",e)\n      set_initialized(true); // ohne login wert reinzugeben\n      return;\n    }\n  }\n\n  useEffect(() => {\n    if(login && !initialized) {\n      set_initialized(true)\n    }\n  }, [login,initialized])\n\n\n  useEffect(() => {\n    load()\n  }, []);\n\n  if( !initialized ) {\n    \n    return <View style={{flex: 1, alignItems: \"center\", justifyContent:\"center\"}}><Text>Lädt login token...</Text></View>\n  }\n\n  return (\n    \n    <Identity.Provider value={[login, ssetLogin]}>\n      <NavigationContainer>\n        { login!=false ? ( \n          <Main/>\n        ): (\n          <LoginFlow/>\n        )}\n      </NavigationContainer>\n    </Identity.Provider>\n  );\n}\n\nconst LoginFlowStack = createStackNavigator();\n\nfunction LoginFlow() {\n  return (\n    <LoginFlowStack.Navigator initialRouteName='Start' screenOptions={{header: ()=>{return false} }}>\n      <LoginFlowStack.Screen name='Start' component={LoginFlowStart}></LoginFlowStack.Screen>\n      <LoginFlowStack.Screen name='ChooseWGUser' component={LoginFlowChooseWGUser}></LoginFlowStack.Screen>\n      <LoginFlowStack.Screen name='AsUser' component={LoginFlowAsUser}></LoginFlowStack.Screen>\n    </LoginFlowStack.Navigator>\n  );\n}\n\nfunction LoginFlowStart({navigation}) {\n  const [wg_url, set_wg_url] = useState(\"\");\n  console.log(wg_url);\n\n  return (\n    <View style={s.container}>\n      <Text style={{fontSize: 32}}>Hallo!</Text>\n      <Text>Gebe das Kürzel deiner WG an...</Text>\n      <TextInput placeholder='z.b. wg-von-heinz' style={s.input} value={wg_url} onChangeText={set_wg_url}></TextInput>\n      <Button title='Anmelden' onPress={() => navigation.push(\"ChooseWGUser\", {wg_url})}></Button>\n    </View>);\n}\n\nfunction LoginFlowAsUser (props) {\n  const [psswd, set_psswd] = useState(\"\");\n  const [loading, set_loading] = useState(false);\n  const [error, set_error] = useState(null);\n  let user = props.route.params.user || {};\n\n  const [login, setLogin] = useContext(Identity);\n\n  return (\n    <View style={s.container}>\n      <RoundImage imgSize={200} style={s.headerImg} styleRing={{borderColor: \"afb1cc\", borderWidth: 7}} imgUrl={urlFromUpload(user.profile_pic)}></RoundImage>\n      <Text style={{fontSize: 32}}>{user.name}<Text style={{color: \"rgba(0, 0, 0, 0.48)\"}}>- @{user.username}</Text> </Text>\n      <Text>{error?(\"AHA! UNfug also? (Gab fehler:)\\n\"+error):\"NA fug?! stimmt das denn auch? Gib mal Passwort ran jetzt\"}</Text>\n      <TextInput placeholder='darkest secret (i mean prlly one of the lightest actually)' style={s.input} value={psswd} onChangeText={set_psswd}></TextInput>\n      <Button disabled={loading} title='Anmelden' onPress={async (ev) => {\n        set_loading(true);\n        //console.log(\"LOGIN\", user, psswd)\n        try {\n          var res = await fetch(apiUrl + \"/auth/login\", { \n            method: \"POST\", \n            body: JSON.stringify( { username: user.username, password: psswd } ), \n            headers: { 'Content-Type': \"application/json\" } });\n          if ( res.ok ) {\n            let json = await res.json();\n            console.log( \"LOGIN successful\", json );\n\n\n\n            setLogin({ ...json, user})\n          } else {\n            let text = await res.text();\n            set_error(text);\n          }\n        } catch (err) {\n          set_error(err);\n        }\n        set_loading(false);\n      }}></Button>\n    </View>);\n}\n\nfunction LoginFlowChooseWGUser(props) {\n  return <StoreScreen onUserPress={(user) => {\n    props.navigation.push(\"AsUser\", {user});\n  }} {...props}/>\n}\n\nfunction Main() {\n  const [wg] = useWebData(\"/api/my_wg\", {\n        name: \"WG\",\n        description: \"Loading...\",\n        profile_pic: null,\n        header_pic: null\n    }, {\n        name: \"FEHLER!!\",\n        description: \"Konnte auf diese WG nicht zugreifen!\"\n    });\n\n    const [users] = useWebData(\"/api/my_wg/users\", [], [{\n        name: \"FEHLER!\",\n        username: \"Halt\",\n        id: -1\n    }]);\n\n    let userDict = {};\n    users.forEach((user) =>{\n      userDict[user.id] = user;\n    })\n\n  return (\n    <WgAndUsers.Provider value={{wg, users: userDict}}>\n      <Tab.Navigator screenOptions={{\n        tabBarShowLabel: false\n      }}>\n          <Tab.Screen name=\"Home\" component={HomeScreen} options={{\n            tabBarIcon: ({focused: f}) => (<Icon name=\"home\" size={30} color={f? accentColor : mutedAccentColor} />),\n            headerShown: false\n          }}/>\n          <Tab.Screen name=\"Finance\" component={FinanceScreen} options={{\n            tabBarIcon: ({focused: f}) => (<Icon name=\"money\" size={30} color={f? accentColor : mutedAccentColor} />),\n            headerShown: false\n          }}/>\n          <Tab.Screen name=\"Setting\" component={SettingScreen} options={{\n            tabBarIcon: ({focused: f}) => (<Icon name=\"gears\" size={30} color={f? accentColor : mutedAccentColor} />)\n          }} />\n      </Tab.Navigator>\n    </WgAndUsers.Provider>\n  );\n}\n\nconst s = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  input: {\n    borderColor: '#757575',\n    borderRadius: 10,\n    borderWidth: 2,\n    padding: 5,\n    alignSelf: 'stretch',\n    margin: 20\n  }\n});\n\n\nconst HomeScreen = (props ) => {\n  return <StoreScreen {...props}></StoreScreen>\n}\n\nfunction ImagePickerrrr(props) {\n  const [image, setImage] = useState(null);\n\n  const pickImage = async () => {\n    // No permissions request is necessary for launching the image library\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: props.aspect || [1,1],\n      quality: 1,\n    });\n\n    console.log(result);\n\n    if (!result.cancelled && props.setImage) {\n      props.setImage(result.uri);\n    }\n  };\n\n  return (\n    <Pressable onPress={pickImage}>\n      {props.children}\n    </Pressable>\n  );\n}\n\nconst SettingScreen = (props) => {\n  const [login, setLogin] = useContext(Identity);\n\n  return <View><Text>Settings</Text>\n    {/*<UserForm></UserForm>\n\n    <Text style={{fontSize:20, marginTop:20, alignSelf:\"stretch\", backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>WG</Text>\n    <TextInput placeholder=\"WG Name\"/>\n    <TextInput placeholder=\"/url\"/>\n    <TextInput multiline={true} placeholder=\"Beschreibung\"/>\n    <Text>Header:</Text>\n    <ImagePickerrrr/>\n    <Text>Profile_pic:</Text>\n    <ImagePickerrrr/>*/}\n\n    <Button title=\"ABMELDEN\" color=\"red\" onPress={()=>{\n      setLogin(false)\n    }}></Button>\n  </View>\n}\n\nconst UserForm = (props) => {\n  let [login] = useContext(Identity)\n  let [ppic, setPpic] = useState(urlFromUpload(login.user.profile_pic));\n\n  return <View>\n    <Text style={{fontSize:20, marginTop:20, alignSelf:\"stretch\", backgroundColor:transparentWhite,fontWeight:\"bold\",textAlign:\"center\"}}>User</Text>\n    <TextInput placeholder={login.user.name}/>\n    <TextInput placeholder={login.user.username}/>\n    <TextInput multiline={true} placeholder={login.user.bio}/>\n    <Text>Profile_pic:</Text>\n    <ImagePickerrrr setImage={setPpic}>\n      <RoundImage imgSize={300} imgUrl={ppic}></RoundImage>\n    </ImagePickerrrr>\n  </View>\n}","import 'react-native-gesture-handler'; // why\r\nimport {App as Lmao} from './src/App'\r\n\r\nexport default function App(props) {\r\n    return ( <Lmao {...props}/> );\r\n}"],"sourceRoot":""}